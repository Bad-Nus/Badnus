---
Tags:
  - 题解
---
# 题面
[SSLOJ-2025-10-7-T4.种树](../../../题面/SSLOJ题面/2025-10-7A/SSLOJ-2025-10-7-T4.种树.md)

![[../../../题面/SSLOJ题面/2025-10-7A/SSLOJ-2025-10-7-T4.种树]]
# 分析
>  设 $f(n,k)$ 表示 $n$ 个格子，每个格子最多种一棵树，每棵树相距至少为 $k$ 的方案数，有两种做法。

1. 我们先钦定要种 $i$ 棵树，每棵树后面固定有 $k-1$ 个空位与其他树隔开，那么剩下的 $n-(k-1)i$ 个空位用以种树，共 $\binom{n-(k-1)i}{i}$ 种，总方案数为 $\sum\limits_{0\le i\le\lfloor\frac{n}{k}\rfloor}\binom{n-(k-1)i}{i}$ 。
2. $\text{dp}$ ，

>  设 $ans(n,x,k)$ 表示 $n$ 个格子，每个格子最多种一棵树，第 $x$ 个位置不种树，每棵树相距至少为 $k$ 的方案数。  

考虑简单容斥，将总方案数减去种第 $x$ 位置的合法方案数。由于第 $x$ 位种植之后，区间 $[x-k,x+k]$ 那么有 

$$ans(n,x,k)=solve(n, k) - solve(x-k-1, k) \times solve(n-x-k+1-1,k)=solve(n, k) - solve(x-k-1, k) \times solve(n-x-k, k)$$
