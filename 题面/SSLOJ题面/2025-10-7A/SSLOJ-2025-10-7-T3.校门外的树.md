---
Tags:
  - 题面
---
# SSLOJ-2025-10-7-T 3. 校门外的树
题解：[题解：SSLOJ-2025-10-7-T3.校门外的树](../../../题解/SSLOJ/2025-10-7A/题解：SSLOJ-2025-10-7-T3.校门外的树.md)

题解：[[../../../题解/SSLOJ/2025-10-7A/题解：SSLOJ-2025-10-7-T3.校门外的树|题解：SSLOJ-2025-10-7-T3.校门外的树]]
## 题目描述

校门外有 $n$ 棵树，每棵树有一个初始高度 $h_i$ 和生长速度 $v_i$ ，在接下来的 $m$ 天中，第 $i$ 棵树会长高 $v_i$ ，之后有两种事件可能会发生

- $[l, r]$ 区间内的树生长速度会增加 $v$ ，即 $v_i += v$ ， $l \leq i \leq r$
- 查询 $[l, r]$ 区间内所有树的高度和

对于每个查询事件，你需要输出区间内所有树的高度和，注意到答案可能会很大，所以需要对 $2^{64}$ 取模。

## 输入格式
第一行两个整数 $n$ , $m$

接下来 $n$ 对整数 $h_i$ 和 $v_i$ ，表示每棵树的初始高度和生长速度

最后有 $m$ 行，每行第一个整数 $t$ 表示事件类型，如果是修改事件，则 $t = 1$ ，后面有三个整数 $l$ , $r$ , $v$ ; 如果是查询事件， $t = 2$ ，后面有两个整数 $l$ , $r$ 。

## 输出格式
对于每个查询事件，输出答案。

## 数据范围与提示
对于 $30\%$ 的数据， $n, m \leq 5000$  
对于另外 $20\%$ 的数据，只包含查询操作  
对于 $100\%$ 的数据， $1 \leq n \leq 5 \times 10^5$ ， $1 \leq m \leq 5 \times 10^5$ ， $1 \leq h_i, v_i \leq 10^9$ ， $1 \leq l \leq r \leq n$ ， $1 \leq v \leq 10^9$ 。