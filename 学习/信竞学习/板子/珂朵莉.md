---
tags:
  - 板子
---
# 裸板

```cpp
int n;
struct nd{
	int l,r;
	mutable int v;
	bool operator<(const nd&a)const{return l<a.l;}
};
set<nd>odt;
auto split(int x){//将包含x点的区间[l,r]分裂为[l,x)和[x,r]并返回指向后者的迭代器 
	if(x>n)return odt.end();
	auto it=--odt.upper_bound({x,0,0});
	if(it->l==x)return it;
	int l=it->l,r=it->r,v=it->v;
	odt.erase(it);
	return odt.insert({l,x-1,v}),odt.insert({x,r,v}).first;
}
void assign(int l,int r,int v){//将[l,r]区间删去，再插入一个[l,r]值为v的区间，相当于对[l,r]区间赋值 
	auto itr=split(r+1),itl=split(l);
	odt.erase(itl,itr);
	odt.insert({l,r,v});
}
void perform(int l,int r){
	auto itr=split(r+1),itl=split(l);
	for(;itl!=itr;++itl){
		//do sth.
	}
}
```