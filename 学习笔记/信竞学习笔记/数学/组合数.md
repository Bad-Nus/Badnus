# 加乘原理
-  加法原理
完成一个工程可以有 $n$ 类办法， $a_i(1 \le i \le n)$ 代表第 $i$ 类方法的数目。那么完成这件事共有 $S=a_1+a_2+\cdots +a_n$ 种不同的方法。
- 乘法原理
完成一个工程需要分 $n$ 个步骤， $a_i(1 \le i \le n)$ 代表第 $i$ 个步骤的不同方法数目。那么完成这件事共有 $S = a_1 \times a_2 \times \cdots \times a_n$ 种不同的方法。
## 排列组合数
> $n$ 个不同数中取 $m$ 个组成的集合方案数

$$\begin{equation}
\begin{split}
C_n^m
&=\binom n m\\
&=\binom n {n-m}\\
&=\binom {n-1} {m}+\binom {n-1} {m-1}\\
&=\frac{n!}{(n-m!)m!}\\
&=\frac{A_n^m}{m!}\\
&=\prod_{i=1}^m{\frac {n-i+1}{i}}\\
&=\frac {n-m+1}{m}\times \prod_{i=1}^{m-1}{\frac {n-i+1}{i}}\\
&=\frac {n-m+1}{m}\binom n {m-1}\\
\end{split}
\end{equation}$$

> $n$ 个不同数中取 $m$ 个组成的排列方案数

$$A_n^m=\frac{n!}{(n-m!)}=m!\binom{n}{m}=\prod_{i=1}^m (n-i+1)$$

## 隔板法
1. (每组至少 $1$ 个) $n$ 个元素分成 $k$ 组，相当于将 $k-1$ 个隔板放在 $n$ 个元素个 $n-1$ 个缝隙里，方案数 $\binom {n-1}{k-1}$
2. (每组至少 $0$ 个)借 $k$ 个元素，放在 $k$ 组里，剩下的 $n$ 个元素正常放，无视掉那借的 $k$ 个元素后便是合法方案，方法数 $\binom{n+k-1}{k-1}=\binom{n+k-1}{n}$
3. (第 $i$ 组至少 $a_i$ 个)先借 $\sum a_i$ 个，然后问题便转化成了每组至少 $0$ 个，那么再借 $k$，方案数 $\binom{n - \sum a_i + k - 1}{n - \sum a_i}$ 
## 不相邻的排列

$1 \sim n$ 这 $n$ 个自然数中选 $k$ 个，这 $k$ 个数中任何两个数都不相邻的组合有 $\binom {n-k+1}{k}$ 种。
## 二项式定理
> 二项式定理阐明了一个展开式的系数：

$$
(a+b)^n=\sum_{i=0}^n\binom{n}{i}a^{n-i}b^i
$$
> 扩展为多项式：(设 $n$ 为正整数， $x_i$ 为实数)

$$
(x_1 + x_2 + \cdots + x_t)^n = \sum_{满足 n_1 + \cdots + n_t=n 的非负整数解} \binom{n}{n_1,n_2,\cdots,n_t} x_1^{n_1}x_2^{n_2}\cdots x_t^{n_t}
$$
> 其中的 $\binom{n}{n_1,n_2,\cdots,n_t}$ 是多项式系数，它的性质：

$$
\sum{\binom{n}{n_1,n_2,\cdots,n_t}} = t^n
$$
### 其他性质
1. $\sum_{i=1}^n\binom{n}{i}=2^n$
2. $\sum_{i=1}^n(-1)^i\binom{n}{i}=[n=0]$
3. $\sum_{i=1}^n\binom{n}{i}\binom m {k-i}=\binom{n+m}k$
4. $\sum_{i=1}^n{\binom{n}{i}}^2=\binom {2n}n$
5. $\sum_{i=0}^ni\binom{n}{i}=n2^{n-1}$
6. $\sum_{i=0}^ni^2\binom{n}{i}=n(n+1)2^{n-2}$
7. $\sum_{l=0}^n\binom{l}{k} = \binom{n+1}{k+1}$
8. $\binom{n}{r}\binom{r}{k} = \binom{n}{k}\binom{n-k}{r-k}$
9. $\sum_{i=0}^n\binom{n-i}{i}=F_{n+1}$ (其中 $F$ 是斐波那契数列)
10. $\binom{n+k}{k}^2=\sum_{j=0}^k\binom{k}{j}^2\binom{n+2k-j}{2k}$
## 卢卡斯定理
> 在模 $p$ 意义下求 $\binom{n}{m}\%p$ :
> 
> 1. $n,m$ 取值范围较小，直接预处理阶乘
>
> 2. $n,m$ 取值范围较大时预处理不可接受，若 $p$ 较小且为质数，考虑结合模性质优化:

对于素数 $p$，有:

$$
\binom{n}{m}\equiv \binom{\lfloor n/p\rfloor}{\lfloor m/p\rfloor}\binom{n\bmod p}{m\bmod p}\pmod p.
$$

其中，当 $n<m$ 时，二项式系数 $\dbinom{n}{m}$ 规定为 $0$
